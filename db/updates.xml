<?xml version="1.0" encoding="UTF-8"?>
<updates>
	<!-- Beispiel 
		Aenderungen, die die Struktur der Datenbank aendern, sollten getrennt von reinen 
		Aenderungen an den Daten gehalten werden. Dies erleichtert das aktualliseren des Servers
		und auch eigener Datenbestaende, die man ggf angepasst hat. 
		Ausgenommen sind Aenderungen an den Daten, die in Folge von Strukturaenderungen zwingend notwendig
		sind. Diese sollten jedoch generisch formuliert sein, so dass sie nicht nur auf den Beispiedaten
		funktionieren.
		Die Identifikation erfolgt ueber das Attribut type, das entweder den Wert "structure", "data" 
		oder "text" annehmen kann ("text" bezeichnet Updates, zu denen kein SQL-Kommando sondern nur eine
		Beschreibung existiert)
		Zusaetzlich verfuegt jedes update ueber ein Datum in der Form "JJJJ-MM-TT".
		
		<update type="structure" datum="2006-10-31"><![CDATA[
			ALTER TABLE academy ...;
			CREATE TABLE irgendwas (....);
		]]></update>
		
		<update type="data" datum="2006-11-01"><![CDATA[
			INSERT INTO ammo (name) VALUES ("Meine ganz tolle neue Supermunition");
			UPDATE ship_types SET crew=1 WHERE crew > 1;
		]]></update>
		 
	-->
	<update type="data" datum="2006-11-11"><![CDATA[
		UPDATE users SET ally=0 WHERE id=-15;									
	]]></update>
	<update type="data" datum="2006-11-11"><![CDATA[
		UPDATE users SET passwort='98f6bcd4621d373cade4e832627b4f6' WHERE passwort='098f6bcd4621d373cade4e832627b4f6';
	]]></update>
	<update type="structure" datum="2006-11-11"><![CDATA[	
		CREATE TABLE `werften` (
  			`id` int(11) NOT NULL auto_increment,
  			`type` smallint(6) NOT NULL default '0',
  			`building` int(11) NOT NULL default '0',
  			`item` smallint(6) NOT NULL default '-1',
  			`remaining` tinyint(4) NOT NULL default '0',
  			`flagschiff` tinyint(1) unsigned NOT NULL default '0',
  			`col` int(11) NOT NULL default '0',
  			`shipid` int(11) NOT NULL default '0',
  			`linked` int(10) unsigned NOT NULL default '0',
  			PRIMARY KEY  (`id`),
  			KEY `col` (`col`),
  			KEY `shipid` (`shipid`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
	]]></update>
	<update type="structure" datum="2006-11-26"><![CDATA[	
		CREATE TABLE `config_vacmodes` (
		  `id` int(11) NOT NULL auto_increment,
		  `dauer` int(10) unsigned NOT NULL default '1',
		  `vorlauf` int(10) unsigned NOT NULL default '1',
		  PRIMARY KEY  (`id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		INSERT INTO `config_vacmodes` (`id`, `dauer`, `vorlauf`) VALUES (1, 35, 14),
		(2, 49, 14),
		(3, 98, 14),
		(4, 147, 14),
		(5, 196, 14);
	]]></update>
	<update type="structure" datum="2006-12-01"><![CDATA[
		ALTER TABLE `quests_running` CHANGE `execdata` `execdata` BLOB NOT NULL;
		ALTER TABLE `ships` CHANGE `scriptexedata` `scriptexedata` BLOB NULL DEFAULT NULL;
	]]></update>
	<update type="structure" datum="2006-12-01"><![CDATA[
		ALTER TABLE users CHANGE nstat nstat VARCHAR(30) NOT NULL DEFAULT '';
		ALTER TABLE stats_verkaeufe CHANGE system system TINYINT NOT NULL DEFAULT 1;
	]]></update>
	<update type="structure" datum="2007-01-06"><![CDATA[
		ALTER TABLE ships ADD INDEX type (type);
	]]></update>
	<update type="structure" datum="2007-01-06"><![CDATA[
		CREATE TABLE `config_felsbrocken_systems` (
		  `system` tinyint(4) NOT NULL default '1',
		  `count` int(11) NOT NULL default '1',
		  PRIMARY KEY  (`system`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		INSERT INTO `config_felsbrocken_systems` (`system`, `count`) VALUES (7, 130);

		CREATE TABLE `config_felsbrocken` (
		  `id` int(11) NOT NULL auto_increment,
		  `shiptype` int(11) NOT NULL default '0',
		  `system` tinyint(4) NOT NULL default '1',
		  `chance` tinyint(4) NOT NULL default '1',
		  `cargo` varchar(255) NOT NULL default '0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,',
		  PRIMARY KEY  (`id`),
		  KEY `system` (`system`),
		  KEY `fk_config_felsbrocken_shiptype` (`shiptype`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Die verschiedenen Felsbrockenbestueckungen';
		
		INSERT INTO `config_felsbrocken` (`id`, `shiptype`, `system`, `chance`, `cargo`) VALUES (1, 77, 7, 55, '0,0,0,0,0,0,0,0,0,4,0,0,0,0,7,0,0,0,'),
		(2, 77, 7, 28, '0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,'),
		(3, 77, 7, 15, '0,0,0,0,0,0,0,6,0,0,0,0,0,0,20,0,0,0,'),
		(4, 77, 7, 2, '0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,0,0,');
		
		ALTER TABLE `config_felsbrocken`
		  ADD CONSTRAINT `fk_config_felsbrocken_system` FOREIGN KEY (`system`) REFERENCES `config_felsbrocken_systems` (`system`) ON DELETE NO ACTION ON UPDATE NO ACTION,
		  ADD CONSTRAINT `fk_config_felsbrocken_shiptype` FOREIGN KEY (`shiptype`) REFERENCES `ship_types` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
	]]></update>
	<update type="structure" datum="2007-01-07"><![CDATA[
		ALTER TABLE transmissionen ADD INDEX empfaenger (empfaenger,gelesen);
	]]></update>
	<update type="structure" datum="2007-01-07"><![CDATA[
		ALTER TABLE skn ADD INDEX channel (channel);
		ALTER TABLE skn_visits DROP INDEX user, ADD INDEX user (user, channel);
	]]></update>
	<update type="structure" datum="2007-01-14"><![CDATA[
		ALTER TABLE ships_baubar CHANGE costs costs VARCHAR( 100 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'
	]]></update>
	<update type="structure" datum="2007-01-20"><![CDATA[
		DELIMITER //
		CREATE FUNCTION newIntelliShipID(minid INT) RETURNS INT
		READS SQL DATA
		BEGIN
		  DECLARE done,sid,shouldId INT DEFAULT 0;
		  DECLARE cur1 CURSOR FOR SELECT DISTINCT abs(id) iid FROM ships WHERE abs(id)>=minid ORDER BY iid;
		  DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done = 1;
		
		  OPEN cur1;
		  set shouldId = minid;
		  REPEAT
		    FETCH cur1 INTO sid;
		    IF NOT done THEN
		      IF sid <> shouldId THEN
		        CLOSE cur1;
		        RETURN shouldId;
		      END IF;
		      set shouldId = shouldId+1;
		    END IF;
		  UNTIL done END REPEAT;
		
		  CLOSE cur1;
		  RETURN shouldId;
		END;
		//
	]]></update>
	<update type="data" datum="2007-02-07"><![CDATA[
		INSERT INTO `ship_types` (`id`, `nickname`, `picture`, `ru`, `rd`, `ra`, `rm`, `eps`, `cost`, `hull`, `panzerung`, `cargo`, `heat`, `crew`, `weapons`, `maxheat`, `torpedodef`, `shields`, `size`, `jdocks`, `adocks`, `sensorrange`, `hydro`, `recost`, `descrip`, `deutfactor`, `class`, `flags`, `groupwrap`, `werft`, `ow_werft`, `chance4Loot`, `modules`, `shipcount`, `hide`) VALUES (10, 'GTI Arcadia', 'data/schiffe/gcp/gti_arcadia.png', 62, 93, 0, 1565, 4700, 0, 100000, 20, 50000, 0, 19000, 'BGreen=4|TerSlash=9|Terran_Huge_Turret=10|Terran_Turret=15|AAAf=8|standard_flak_ld=6|heavy_flak_ld=6', 'BGreen=60|TerSlash=180|Terran_Huge_Turret=20|Terran_Turret=300|AAAf=160|standard_flak_ld=120|heavy_flak_ld=120', 0, 0, 18, 25, 0, 10, 0, 0, 'Die Arcadia ist einer der gr&ouml;&szlig;ten Au&szlig;enposten der Terraner. Diese Festung dient dazu, Systeme vor feindlicher Invasion zu sch&uuml;tzen, und mit ihren zahlreichen Gesch&uuml;tzen kann sie die Gegner in Schach halten, bis Hilfe eintrifft.\r\n', 0, 8, 'zerstoererpanzerung srs_awac srs_ext_awac secondrow', 10, 'ganymed', 0, 0, '1:misc;2:misc:3:misc;4:misc;5:misc_large_weapon;6:misc_large_weapon;7:misc_large_weapon;8:misc_large_weapon;9:misc_large_weapon;10:misc_large_weapon;11:misc_large_weapon;12:misc_large_weapon;13:misc_large;14:misc_large;15:misc_large;16:misc_large', 1, 0);
		INSERT INTO `ship_types` (`id`, `nickname`, `picture`, `ru`, `rd`, `ra`, `rm`, `eps`, `cost`, `hull`, `panzerung`, `cargo`, `heat`, `crew`, `weapons`, `maxheat`, `torpedodef`, `shields`, `size`, `jdocks`, `adocks`, `sensorrange`, `hydro`, `recost`, `descrip`, `deutfactor`, `class`, `flags`, `groupwrap`, `werft`, `ow_werft`, `chance4Loot`, `modules`, `shipcount`, `hide`) VALUES (27, 'GTT Triton', 'data/schiffe/gcp/gtt_triton.png', 4, 8, 0, 24, 80, 2, 5000, 3, 600, 5, 50, 'Subach_HL-7=1|standard_flak=1', 'Subach_HL-7=5|standard_flak=5', 0, 0, 6, 0, 4, 1, 0, 0, 'Der Standardfrachter des GCP. Obgleich fr&uuml;her nicht in der Lage Standardcontainer zu transportieren, wurde er in den letzten jahren modifiziert um das andocken von bis zu vier containern, Sentrieguns oder J&auml;gern zu erm&ouml;glichen. Dies &auml;ndert jedoch nichts an seiner Schutzlosigkeit, die aus einer schwachen H&uuml;lle und praktisch nicht existenten Bewaffnung resultiert.\r\n\r\nJedes angedockte Objekt erh&ouml;ht die Flugkosten des Schiffes um 1.', 0, 1, '', 10, '', 0, 0, '1:misc', 1, 0);
		INSERT INTO `ship_types` (`id`, `nickname`, `picture`, `ru`, `rd`, `ra`, `rm`, `eps`, `cost`, `hull`, `panzerung`, `cargo`, `heat`, `crew`, `weapons`, `maxheat`, `torpedodef`, `shields`, `size`, `jdocks`, `adocks`, `sensorrange`, `hydro`, `recost`, `descrip`, `deutfactor`, `class`, `flags`, `groupwrap`, `werft`, `ow_werft`, `chance4Loot`, `modules`, `shipcount`, `hide`) VALUES (31, 'Ma at', 'data/schiffe/gcp/gvfr_maat.png', 8, 0, 0, 24, 80, 2, 8500, 4, 1000, 4, 30, 'Subach_HL-7=1|Terran_Turret=3', 'Subach_HL-7=5|Terran_Turret=15', 0, 0, 6, 0, 2, 1, 0, 0, 'Die Ma''at war w&auml;hrend des Gro&szlig;en Krieges der Standard-Transporter der jetztigen Vasudaner. Seine 4 Laserkanonen konnten frechen einzelg&auml;ngerischen GTA-J&auml;ger abwehren, jedoch waren die Ma''at gegen eine Vierer-Staffel machtlos.\r\nAuch heute setzen die Vasudaner die Ma''at als billiges bewaffnetes Transportschiff ein.\r\n\r\nJedes angedockte Objekt erh&ouml;ht die Flugkosten des Schiffes um 1.', 0, 1, '', 10, '', 0, 0, '1:misc', 1, 0);
	]]></update>
	<update type="structure" datum="2007-02-07"><![CDATA[
		ALTER TABLE ships ADD CONSTRAINT ships_type_fk FOREIGN KEY (type) REFERENCES ship_types(id);
		ALTER TABLE ships_baubar ADD CONSTRAINT ships_baubar_type_fk FOREIGN KEY (type) REFERENCES ship_types(id);
	]]></update>
	<update type="structure" datum="2007-02-08"><![CDATA[
		ALTER TABLE ships_modules MODIFY picture VARCHAR(100) NOT NULL;
	]]></update>
	<update type="structure" datum="2007-02-28"><![CDATA[
		ALTER TABLE ships_lost MODIFY battlelog VARCHAR(120) NOT NULL;
	]]></update>
	<update type="structure" datum="2007-03-11"><![CDATA[
		ALTER TABLE ships ADD CONSTRAINT ships_fk_users FOREIGN KEY (owner) REFERENCES users(id);
		ALTER TABLE ships_modules ADD CONSTRAINT ships_modules_fk_ships FOREIGN KEY (id) REFERENCES ships(id);
	]]></update>
	<update type="structure" datum="2007-03-17"><![CDATA[
		ALTER TABLE academy ADD CONSTRAINT academy_fk_bases FOREIGN KEY (col) REFERENCES bases(id);
		ALTER TABLE ally ADD CONSTRAINT ally_fk_users FOREIGN KEY (president) REFERENCES users(id);
		ALTER TABLE ally_posten ADD CONSTRAINT ally_posten_fk_ally FOREIGN KEY (ally) REFERENCES ally(id);
		ALTER TABLE bases ADD CONSTRAINT bases_fk_users FOREIGN KEY (owner) REFERENCES users(id);
		ALTER TABLE battles CHANGE id id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT;
		ALTER TABLE battles_ships ADD CONSTRAINT battles_ships_fk_battles FOREIGN KEY (battleid) REFERENCES battles(id);
		ALTER TABLE battles_ships CHANGE shipid shipid INT NOT NULL DEFAULT '0';
		ALTER TABLE battles_ships ADD CONSTRAINT battles_ships_fk_ships FOREIGN KEY (shipid) REFERENCES ships(id);
		ALTER TABLE battles CHANGE commander1 commander1 INT NOT NULL DEFAULT '0';
		ALTER TABLE battles CHANGE commander2 commander2 INT NOT NULL DEFAULT '0';
		ALTER TABLE battles ADD CONSTRAINT battles_fk_users1 FOREIGN KEY (commander1) REFERENCES users(id);
		ALTER TABLE battles ADD CONSTRAINT battles_fk_users2 FOREIGN KEY (commander2) REFERENCES users(id);
		ALTER TABLE factions_shop_orders ADD CONSTRAINT factions_shop_orders_fk_factions_shop_entries FOREIGN KEY (shopentry_id) REFERENCES factions_shop_entries(id);
		ALTER TABLE factions_shop_orders ADD CONSTRAINT factions_shop_orders_fk_users FOREIGN KEY (user_id) REFERENCES users(id);
		ALTER TABLE fz ADD CONSTRAINT fz_fk_bases FOREIGN KEY (col) REFERENCES bases(id);
		ALTER TABLE gtu_zwischenlager CHANGE posten posten INT NOT NULL DEFAULT '0';
		ALTER TABLE gtu_zwischenlager ADD CONSTRAINT gtu_zwischenlager_fk_ships FOREIGN KEY (posten) REFERENCES ships(id);
		ALTER TABLE gtu_zwischenlager ADD CONSTRAINT gtu_zwischenlager_fk_users1 FOREIGN KEY (user1) REFERENCES users(id);
		ALTER TABLE gtu_zwischenlager ADD CONSTRAINT gtu_zwischenlager_fk_users2 FOREIGN KEY (user2) REFERENCES users(id);
		ALTER TABLE handel ADD CONSTRAINT handel_fk_users FOREIGN KEY (who) REFERENCES users(id);
		ALTER TABLE jumps CHANGE shipid shipid INT NOT NULL DEFAULT '0';
		ALTER TABLE jumps ADD CONSTRAINT jumps_fk_ships FOREIGN KEY (shipid) REFERENCES ships(id);
		ALTER TABLE offiziere CHANGE userid userid INT NOT NULL DEFAULT '0';
		ALTER TABLE offiziere ADD CONSTRAINT offiziere_fk_users FOREIGN KEY (userid) REFERENCES users(id);
		ALTER TABLE orders_ships ADD CONSTRAINT orders_ships_fk_ship_types FOREIGN KEY (type) REFERENCES ship_types(id);
		ALTER TABLE ordner ADD CONSTRAINT ordner_fk_users FOREIGN KEY (playerid) REFERENCES users(id);
		ALTER TABLE quests_completed CHANGE userid userid INT NOT NULL DEFAULT '0';
		ALTER TABLE quests_completed ADD CONSTRAINT quests_completed_fk_users FOREIGN KEY (userid) REFERENCES users(id);
		ALTER TABLE quests_completed ADD CONSTRAINT quests_completed_fk_quests FOREIGN KEY (questid) REFERENCES quests(id);
		ALTER TABLE quests_running ADD CONSTRAINT quests_running_fk_users FOREIGN KEY (userid) REFERENCES users(id);
		ALTER TABLE quests_running ADD CONSTRAINT quests_running_fk_quests FOREIGN KEY (questid) REFERENCES quests(id);
		ALTER TABLE sessions ADD CONSTRAINT sessions_fk_users FOREIGN KEY (id) REFERENCES users(id);
		ALTER TABLE ship_loot ADD CONSTRAINT ship_loot_fk_users1 FOREIGN KEY (owner) REFERENCES users(id);
		ALTER TABLE ship_loot ADD CONSTRAINT ship_loot_fk_users2 FOREIGN KEY (targetuser) REFERENCES users(id);
		ALTER TABLE skn_visits ADD CONSTRAINT skn_visits_fk_users FOREIGN KEY (user) REFERENCES users(id);
		ALTER TABLE skn_visits ADD CONSTRAINT skn_visits_fk_skn_channels FOREIGN KEY (channel) REFERENCES skn_channels(id);
		ALTER TABLE skn ADD CONSTRAINT skn_fk_users FOREIGN KEY (userid) REFERENCES users(id);
		ALTER TABLE stats_module_locations ADD CONSTRAINT stats_module_locations_fk_user_id FOREIGN KEY (user_id) REFERENCES users(id);
		ALTER TABLE stats_user_cargo ADD CONSTRAINT stats_user_cargo_fk_user_id FOREIGN KEY (user_id) REFERENCES users(id);
		ALTER TABLE survey_entries ADD CONSTRAINT survey_entries_fk_surveys FOREIGN KEY (survey_id) REFERENCES surveys(id);
		ALTER TABLE survey_results ADD CONSTRAINT survey_results_fk_surveys FOREIGN KEY (survey_id) REFERENCES surveys(id);
		ALTER TABLE survey_voted ADD CONSTRAINT survey_voted_fk_surveys FOREIGN KEY (survey_id) REFERENCES surveys(id);
		ALTER TABLE survey_voted ADD CONSTRAINT survey_voted_fk_users FOREIGN KEY (user_id) REFERENCES users(id);
		ALTER TABLE transmissionen ADD CONSTRAINT transmissionen_fk_users1 FOREIGN KEY (sender) REFERENCES users(id);
		ALTER TABLE transmissionen ADD CONSTRAINT transmissionen_fk_users2 FOREIGN KEY (empfaenger) REFERENCES users(id);
		ALTER TABLE user_f ADD CONSTRAINT user_f_fk_users FOREIGN KEY (id) REFERENCES users(id);
		ALTER TABLE user_moneytransfer ADD CONSTRAINT user_moneytransfer_fk_users1 FOREIGN KEY (`from`) REFERENCES users(id);
		ALTER TABLE user_moneytransfer ADD CONSTRAINT user_moneytransfer_fk_users2 FOREIGN KEY (`to`) REFERENCES users(id);
		ALTER TABLE user_relations ADD CONSTRAINT user_relations_fk_users1 FOREIGN KEY (`user_id`) REFERENCES users(id);
		ALTER TABLE user_relations ADD CONSTRAINT user_relations_fk_users2 FOREIGN KEY (`target_id`) REFERENCES users(id);
		ALTER TABLE user_values ADD CONSTRAINT user_values_fk_users FOREIGN KEY (`user_id`) REFERENCES users(id);
		ALTER TABLE versteigerungen_pakete ADD CONSTRAINT versteigerungen_pakete_fk_users FOREIGN KEY (bieter) REFERENCES users(id);
		ALTER TABLE versteigerungen ADD CONSTRAINT versteigerungen_fk_users FOREIGN KEY (bieter) REFERENCES users(id);
		ALTER TABLE weaponfactory CHANGE col col INT NOT NULL DEFAULT '0';
		ALTER TABLE weaponfactory ADD CONSTRAINT weaponfactory_fk_bases FOREIGN KEY (col) REFERENCES bases(id);
	]]></update>
	<update type="structure" datum="2007-03-24"><![CDATA[
		 ALTER TABLE buildings CHANGE module module VARCHAR( 60 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'net.driftingsouls.ds2.server.bases.DefaultBuilding';
	]]></update>
	<update type="data" datum="2007-03-24"><![CDATA[
		 UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.DefaultBuilding' WHERE module='default';
		 UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.Kommandozentrale' WHERE module='kommandozentrale';
		 UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.Forschungszentrum' WHERE module='forschungszentrum';
		 UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.Academy' WHERE module='academy';
		 UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.Werft' WHERE module='werft';
		 UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.Waffenfabrik' WHERE module='waffenfabrik';
	]]></update>
	<update type="structure" datum="2007-03-25"><![CDATA[
		ALTER TABLE quests_quick CHANGE source source VARCHAR(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '';
		ALTER TABLE quests_quick CHANGE target target VARCHAR(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '';
	]]></update>
	<update type="structure" datum="2007-04-28"><![CDATA[
		ALTER TABLE skn CHANGE channel channel int(10) unsigned NOT NULL DEFAULT '1';
		ALTER TABLE skn ADD CONSTRAINT skn_fk_skn_channels FOREIGN KEY (channel) REFERENCES skn_channels(id);
		ALTER TABLE `jumpnodes` DROP INDEX `system`;
		ALTER TABLE `jumpnodes` DROP INDEX `x`;
		ALTER TABLE `jumpnodes` DROP INDEX `y`;
		ALTER TABLE `jumpnodes` ADD INDEX `coords` ( `x` , `y` , `system` );
		ALTER TABLE `sessions` ADD PRIMARY KEY ( `session` );
		ALTER TABLE `sessions` DROP INDEX `session`;
		ALTER TABLE `ships` CHANGE `jumptarget` `jumptarget` VARCHAR( 100 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
	]]></update>
	<update type="structure" datum="2007-04-29"><![CDATA[
		ALTER TABLE transmissionen CHANGE ordner ordner int(10) unsigned NOT NULL DEFAULT '0';
		ALTER TABLE `ships` ADD INDEX ( `docked` );
	]]></update>
	<update type="structure" datum="2007-04-30"><![CDATA[
		ALTER TABLE `ships` CHANGE `destcom` `destcom` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;
	]]></update>
	<update type="structure" datum="2007-05-01"><![CDATA[
		ALTER TABLE ships DROP INDEX owner, ADD INDEX owner ( owner , id );
		ALTER TABLE bases DROP INDEX owner, ADD INDEX owner ( owner , id );
		ALTER TABLE `transmissionen` CHANGE `kommentar` `kommentar` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
		ALTER TABLE `ships` CHANGE `destcom` `destcom` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
	]]></update>
	<update type="structure" datum="2007-05-05"><![CDATA[
		ALTER TABLE `bases` CHANGE `terrain` `terrain` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
		ALTER TABLE `bases` CHANGE `bebauung` `bebauung` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
		ALTER TABLE `bases` CHANGE `active` `active` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
		ALTER TABLE `bases` CHANGE `autogtuacts` `autogtuacts` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
		ALTER TABLE `users` CHANGE `knownItems` `knownItems` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL default '';
	]]></update>
	<update type="data" datum="2007-05-18"><![CDATA[
		INSERT INTO `user_values` (`id`, `user_id`, `name`, `value`) VALUES (974, 0, 'PMS/signature', '');
	]]></update>
	<update type="structure" datum="2007-08-04"><![CDATA[
		ALTER TABLE `ships_lost` CHANGE `ally` `ally` SMALLINT( 5 ) NOT NULL DEFAULT '0';										 
	]]></update>
	<update type="structure" datum="2008-02-03"><![CDATA[
		ALTER TABLE user_moneytransfer CHANGE `count` `count` bigint(20) unsigned NOT NULL default '0';
		
		ALTER TABLE ammo CHANGE replaces replaces int(11) unsigned NULL;
		UPDATE ammo SET replaces=NULL WHERE replaces=0;
		ALTER TABLE ammo ADD CONSTRAINT ammo_fk_ammo FOREIGN KEY (replaces) REFERENCES ammo(id);
		
		ALTER TABLE users CHANGE allyposten allyposten INT( 11 ) NULL;
		UPDATE users SET allyposten=NULL WHERE allyposten=0;
		ALTER TABLE users ADD CONSTRAINT users_fk_ally_posten FOREIGN KEY (allyposten) REFERENCES ally_posten(id);
	]]></update>
	<update type="structure" datum="2009-02-09"><![CDATA[
		ALTER TABLE users CHANGE ally ally int DEFAULT NULL;
		UPDATE users SET ally=NULL WHERE ally=0;
		ALTER TABLE users ADD CONSTRAINT users_fk_ally FOREIGN KEY (ally) REFERENCES ally(id);
		
		ALTER TABLE users CHANGE flagschiff flagschiff INT NULL DEFAULT NULL;
		UPDATE users SET flagschiff=NULL WHERE flagschiff=0;
		ALTER TABLE users ADD CONSTRAINT users_fk_ships FOREIGN KEY (flagschiff) REFERENCES ships(id);
		
		ALTER TABLE `academy` DROP `id`;
		ALTER TABLE `academy` ADD PRIMARY KEY ( `col` );
		ALTER TABLE `academy` DROP INDEX `col`;
		
		alter table `bases` add `marines` int unsigned not null default '0';
		ALTER TABLE bases ADD COLUMN version INT NOT NULL DEFAULT '0';
	]]></update>
	<update type="structure" datum="2008-02-10"><![CDATA[
		ALTER TABLE `transmissionen` CHANGE `title` `title` VARCHAR( 100 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;
	
		ALTER TABLE `weaponfactory` DROP `id`;
		ALTER TABLE `weaponfactory` ADD PRIMARY KEY ( `col` );
		ALTER TABLE `weaponfactory` DROP INDEX `col`;
		
		ALTER TABLE `fz` DROP `id`;
		ALTER TABLE `fz` ADD PRIMARY KEY ( `col` );
		ALTER TABLE `fz` DROP INDEX `col`;
		
		UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.AcademyBuilding' WHERE module='net.driftingsouls.ds2.server.bases.Academy';
		UPDATE buildings SET module='net.driftingsouls.ds2.server.bases.ForschungszentrumBuilding' WHERE module='net.driftingsouls.ds2.server.bases.Forschungszentrum';
		
		ALTER TABLE `ship_types` ADD `ablativeArmor` INT UNSIGNED NOT NULL AFTER `panzerung`;
		ALTER TABLE `ships_modules` ADD `ablativeArmor` INT UNSIGNED NOT NULL AFTER `panzerung`;
		ALTER TABLE `ship_types` ADD `srs` TINYINT NOT NULL DEFAULT '1';
		ALTER TABLE `ships_modules` ADD `srs` TINYINT NOT NULL DEFAULT '1';
		ALTER TABLE `ships_modules` ADD `scanCost` INT NOT NULL DEFAULT '0';
		ALTER TABLE `ships_modules` ADD `pickingCost` INT NOT NULL DEFAULT '0';
		ALTER TABLE `ship_types` ADD `scanCost` INT NOT NULL;
		ALTER TABLE `ship_types` ADD `pickingCost` INT NOT NULL ;
		alter table `ship_types` add `marines` int unsigned not null default '0';
		alter table `ships_modules` add `marines` int unsigned not null default '0';
		
		CREATE TABLE `gui_help` (
		  `page` varchar(30) NOT NULL,
		  `text` text,
		  PRIMARY KEY  (`page`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
	]]></update>
	<update type="structure" datum="2008-02-16"><![CDATA[
		ALTER TABLE `ships` ADD `modules` INT AFTER `type`;
		UPDATE ships SET modules=(SELECT id FROM ships_modules WHERE ships_modules.id=ships.id);
		
		ALTER TABLE `ships` CHANGE `battle` `battle` SMALLINT UNSIGNED NULL DEFAULT NULL;
		UPDATE ships SET battle=NULL WHERE battle=0;
		ALTER TABLE ships ADD CONSTRAINT ships_fk_battles FOREIGN KEY (battle) REFERENCES battles(id);
		
		alter table `ships` add `marines` int unsigned not null default '0',
			ADD `startFighters` TINYINT( 3 ) UNSIGNED NOT NULL DEFAULT '1',
			ADD `ablativeArmor` INT UNSIGNED NOT NULL AFTER `shields`,
			CHANGE fleet fleet int DEFAULT NULL;
			
		UPDATE ships SET fleet=NULL WHERE fleet=0;
		ALTER TABLE ships ADD CONSTRAINT ships_fk_ship_fleets FOREIGN KEY (fleet) REFERENCES ship_fleets(id);
		
		ALTER TABLE `battles_ships` ADD `ablativeArmor` INT UNSIGNED NOT NULL AFTER `shields`;
		
		ALTER TABLE `nebel` DROP `id`;
		ALTER TABLE `nebel` ADD PRIMARY KEY ( `system` , `x` , `y` );
		ALTER TABLE `nebel` DROP INDEX `coords`;
		
		ALTER TABLE werften CHANGE linked linked int DEFAULT NULL;
		UPDATE werften SET linked=NULL WHERE linked=0;
		ALTER TABLE werften ADD CONSTRAINT werften_fk_bases FOREIGN KEY (linked) REFERENCES bases(id);
		
		ALTER TABLE werften CHANGE col col int DEFAULT NULL;
		UPDATE werften SET col=NULL WHERE col=0;
		ALTER TABLE werften ADD CONSTRAINT werften_fk_bases2 FOREIGN KEY (col) REFERENCES bases(id);
		
		ALTER TABLE werften CHANGE shipid shipid int DEFAULT NULL;
		UPDATE werften SET shipid=NULL WHERE shipid=0;
		ALTER TABLE werften ADD CONSTRAINT werften_fk_ships FOREIGN KEY (shipid) REFERENCES ships(id);
		
		CREATE TABLE `werft_queues` (
		  werft int NOT NULL,
		  `position` int NOT NULL,
		  `building` int(11) default NULL,
		  `item` smallint(6) NOT NULL default '-1',
		  `remaining` tinyint(4) NOT NULL default '0',
		  `flagschiff` tinyint(1) unsigned NOT NULL default '0',
		  PRIMARY KEY  (`werft`,`position`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		ALTER TABLE werft_queues ADD CONSTRAINT werft_queues_fk_werften FOREIGN KEY (werft) REFERENCES werften(id);
		ALTER TABLE werft_queues ADD CONSTRAINT werft_queues_fk_ship_types FOREIGN KEY (building) REFERENCES ship_types(id);
		
		ALTER TABLE `werft_queues` ADD COLUMN costsPerTick varchar(300) NOT NULL default '0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,';
		ALTER TABLE `werft_queues` ADD COLUMN energyPerTick int NOT NULL default '0';
		
		ALTER TABLE `werft_queues` ADD `slots` INT NOT NULL DEFAULT '1',
			ADD `scheduled` TINYINT( 1 ) NOT NULL DEFAULT '0';
			
		ALTER TABLE `werften` ADD `linkedWerft` INT NULL;
		ALTER TABLE werften ADD CONSTRAINT werften_fk_werften FOREIGN KEY (linkedWerft) REFERENCES werften(id) ON DELETE SET NULL;
		ALTER TABLE `werften` ADD `komplex` TINYINT( 1 ) NOT NULL DEFAULT '0';
		
		ALTER TABLE `werft_queues` ADD INDEX ( `werft` );
		ALTER TABLE `werft_queues` DROP PRIMARY KEY;
		ALTER TABLE `werft_queues` ADD `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST;
		
		ALTER TABLE `ships_baubar` DROP `linfactor`;
		ALTER TABLE `ships_baubar` ADD `werftslots` INT NOT NULL DEFAULT '1' AFTER `tr3` ;
		UPDATE ships_baubar SET werftslots=case when LOCATE('pwerft',werftreq) then 6 else 7 end;
		ALTER TABLE `ships_baubar` DROP `werftreq`;
		
		ALTER TABLE `ship_types` ADD COLUMN werftint INT NOT NULL DEFAULT '0';
		UPDATE ship_types SET werftint=case when LOCATE('pwerft',werft) then 6 when LOCATE('ganymed',werft) then 7 else 0 end;
		ALTER TABLE ship_types DROP werft;
		ALTER TABLE `ship_types` CHANGE `werftint` `werft` INT NOT NULL DEFAULT '0';
		
		ALTER TABLE `ships_modules` ADD COLUMN werftint INT NOT NULL DEFAULT '0';
		UPDATE ships_modules SET werftint=case when LOCATE('pwerft',werft) then 6 when LOCATE('ganymed',werft) then 7 else 0 end;
		ALTER TABLE ships_modules DROP werft;
		ALTER TABLE `ships_modules` CHANGE `werftint` `werft` INT NOT NULL DEFAULT '0';
		
		INSERT INTO werft_queues (werft,position,building,item,remaining,flagschiff,slots,scheduled)
			SELECT id,0,building,item,remaining,flagschiff,CASE WHEN col is not null THEN 6 ELSE 7 END, 1 FROM werften WHERE building!=0;
		
		ALTER TABLE `werften`
  			DROP `building`,
  			DROP `item`,
			DROP `remaining`;
			
		alter table ships change ablativeArmor ablativeArmor int(10) unsigned not null default '0';
		alter table ships_modules change ablativeArmor ablativeArmor int(10) unsigned not null default '0';
		ALTER TABLE `battles_ships` change `ablativeArmor` ablativeArmor INT UNSIGNED NOT NULL default '0';
	]]></update>
	<update type="structure" datum="2008-02-16"><![CDATA[
		CREATE TABLE `tradepost_sell` (
		  `shipid` int(11) NOT NULL,
		  `resourceid` int(11) NOT NULL,
		  `price` int(11) NOT NULL,
		  `limit` int(11) NOT NULL,
		  PRIMARY KEY  (`shipid`,`resourceid`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		ALTER TABLE tradepost_sell ADD CONSTRAINT tradepost_sell_fk_ships FOREIGN KEY (shipid) REFERENCES ships(id);
		
		CREATE TABLE `tradepost_buy_limit` (
		  `shipid` int(11) NOT NULL,
		  `resourceid` int(11) NOT NULL,
		  `limit` int(11) NOT NULL,
		  PRIMARY KEY  (`shipid`,`resourceid`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		ALTER TABLE tradepost_buy_limit ADD CONSTRAINT tradepost_buy_limit_fk_ships FOREIGN KEY (shipid) REFERENCES ships(id);
	]]></update>
	<update type="structure" datum="2008-04-29"><![CDATA[
		alter table battles add version int(10) unsigned not null default '0';
		alter table battles_ships add version int(10) unsigned not null default '0';
		alter table ordner add version int(10) unsigned not null default '0';
		alter table transmissionen add version int(10) unsigned not null default '0';
		alter table academy add version int(10) unsigned not null default '0';
		alter table ally add version int(10) unsigned not null default '0';
		alter table ally_posten add version int(10) unsigned not null default '0';
		alter table skn_channels add version int(10) unsigned not null default '0';
		alter table skn add version int(10) unsigned not null default '0';
		alter table skn_visits add version int(10) unsigned not null default '0';
		alter table factions_angebote add version int(10) unsigned not null default '0';
		alter table factions_shop_entries add version int(10) unsigned not null default '0';
		alter table factions_shop_orders add version int(10) unsigned not null default '0';
		alter table fz add version int(10) unsigned not null default '0';
		alter table gtu_warenkurse add version int(10) unsigned not null default '0';
		alter table gtu_zwischenlager add version int(10) unsigned not null default '0';
		alter table handel add version int(10) unsigned not null default '0';
		alter table jumps add version int(10) unsigned not null default '0';
		alter table logging add version int(10) unsigned not null default '0';
		alter table orders add version int(10) unsigned not null default '0';
		alter table versteigerungen_pakete add version int(10) unsigned not null default '0';
		alter table tradepost_buy_limit add version int(10) unsigned not null default '0';
		alter table sectors add version int(10) unsigned not null default '0';
		alter table tradepost_sell add version int(10) unsigned not null default '0';
		alter table stats_cargo add version int(10) unsigned not null default '0';
		alter table stats_gtu add version int(10) unsigned not null default '0';
		alter table stats_module_locations add version int(10) unsigned not null default '0';
		alter table stats_ships add version int(10) unsigned not null default '0';
		alter table stats_user_cargo add version int(10) unsigned not null default '0';
		alter table stats_verkaeufe add version int(10) unsigned not null default '0';
		alter table user_moneytransfer add version int(10) unsigned not null default '0';
		alter table user_relations add version int(10) unsigned not null default '0';
		alter table versteigerungen add version int(10) unsigned not null default '0';
		alter table weaponfactory add version int(10) unsigned not null default '0';
		alter table users add version int(10) unsigned not null default '0';
		alter table user_values add version int(10) unsigned not null default '0';
		alter table smilies add version int(10) unsigned not null default '0';
		alter table ships add version int(10) unsigned not null default '0';
		alter table ship_fleets add version int(10) unsigned not null default '0';
		alter table ship_loot add version int(10) unsigned not null default '0';
		alter table ships_lost add version int(10) unsigned not null default '0';
		alter table ships_modules add version int(10) unsigned not null default '0';
		alter table ship_types add version int(10) unsigned not null default '0';
		alter table tasks add version int(10) unsigned not null default '0';
		alter table werften add version int(10) unsigned not null default '0';
		alter table sessions add version int(10) unsigned not null default '0';
	]]></update>
	<update type="structure" datum="2008-05-11"><![CDATA[
		alter table logging modify type varchar(15) not null;
	]]></update>
	<update type="structure" datum="2008-05-17"><![CDATA[
		alter table users add blocked tinyint(1) unsigned not null default '0';
	]]></update>
	<update type="data" datum="2008-05-22"><![CDATA[
		set sql_mode = NO_AUTO_VALUE_ON_ZERO;
		
		INSERT INTO `forschungen` (`id`, `name`, `req1`, `req2`, `req3`, `time`, `costs`, `descrip`, `race`, `visibility`, `flags`) VALUES (-1, '(nicht erfuellbar)', -1, -1, -1, 0, '0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,', '', 0, 2, '');
		INSERT INTO `forschungen` (`id`, `name`, `req1`, `req2`, `req3`, `time`, `costs`, `descrip`, `race`, `visibility`, `flags`) VALUES (0, '(immer erfuellt)', -1, -1, -1, 0, '0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,', '', 0, 2, '');
		
		DELIMITER //
		DROP PROCEDURE IF EXISTS `convert_f`//
		DROP PROCEDURE IF EXISTS `convert_f_user`//
		CREATE PROCEDURE convert_f_user(uid INT)
		BEGIN
			DECLARE rid INT DEFAULT 0;
			DECLARE selectQuery CHAR(255);
			DECLARE rValue INT DEFAULT 0;
			DECLARE rCount INT DEFAULT 0;
		
			SET rid=0;
			WHILE rid <= 100 DO
				SELECT count(*) INTO rCount FROM forschungen WHERE id=rid;
				IF rCount > 0 THEN 
					SET selectQuery = CONCAT("SELECT r",rid," into @rValue from user_f where id=",uid);
					SET @qry = selectQuery;
		
					PREPARE stmt FROM @qry;
					EXECUTE stmt;
					DEALLOCATE PREPARE stmt;
		
					IF @rValue > 0 THEN
						INSERT INTO userresearch (owner,research) VALUES (uid,rid);
					END IF;
		
				END IF;
				SET rid=rid+1;
			END WHILE;
		END;
		
		CREATE PROCEDURE convert_f()
		BEGIN
			DECLARE done,uid INT DEFAULT 0;
			DECLARE cur1 CURSOR FOR SELECT id FROM users;
			DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done = 1;
		
			OPEN cur1;
			REPEAT
				FETCH cur1 INTO uid;
				CALL convert_f_user(uid);
			UNTIL done END REPEAT;
			CLOSE cur1;
		END;
		// 
		DELIMITER ;
		
		CALL convert_f();
		DROP PROCEDURE `convert_f`;
		DROP PROCEDURE `convert_f_user`;
	]]></update>
	<update type="structure" datum="2008-05-23"><![CDATA[
		ALTER TABLE fz MODIFY forschung int(11);
		UPDATE fz SET forschung=NULL WHERE forschung=0;
		ALTER TABLE fz ADD CONSTRAINT fz_fk_forschungen FOREIGN KEY (forschung) REFERENCES forschungen(id);
	]]></update>
	<update type="structure" datum="2008-05-31"><![CDATA[
		CREATE TABLE `upgrade_info` (
		  `id` int(11) NOT NULL default '0',
		  `type` int(5) NOT NULL default '1',
		  `mod` int(11) NOT NULL default '0',
		  `cargo` bool NOT NULL default FALSE,
		  `price` int(11) NOT NULL default '0',
		  `miningexplosive` int(11) NOT NULL default '0',
		  `ore` int(11) NOT NULL default '0',
		  PRIMARY KEY  (`id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 1, 1,       0, false,        0,    0,    0);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 2, 1,      10, false,  1250000,  125, 1250);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 3, 1,      20, false,  2500000,  250, 2500);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 4, 1,      30, false,  3750000,  375, 3750);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 5, 1,      40, false,  5000000,  500, 5000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 6, 1,       0,  true,        0,    0,     0);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 7, 1,   75000,  true,  1500000,  300,  1250);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 8, 1,  150000,  true,  2250000,  450,  2500);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES ( 9, 1,  225000,  true,  3000000,  600,  3750);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (10, 1,  300000,  true,  3750000,  750,  5000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (11, 1,  375000,  true,  4500000,  900,  5000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (12, 1,  450000,  true,  5250000, 1050,  5000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (13, 1,  525000,  true,  6000000, 1200,  5000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (14, 1,  600000,  true,  6750000, 1350,  5000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (15, 1,       0, false,        0,    0,     0);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (16, 2,      10, false,  1500000,  150,  1500);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (17, 2,      20, false,  3000000,  300,  3000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (18, 2,      30, false,  4500000,  450,  4500);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (20, 2,      40, false,  6000000,  600,  6000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (21, 2,      50, false,  7500000,  750,  7500);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (22, 2,      60, false,  9000000,  900,  9000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (23, 2,       0,  true,        0,    0,     0);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (24, 2,  125000,  true,  3750000,  575,  4250);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (25, 2,  250000,  true,  5000000,  850,  6000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (26, 2,  375000,  true,  6250000, 1125,  7750);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (27, 2,  500000,  true,  7500000, 1400,  9500);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (28, 2,  625000,  true,  8750000, 1675, 11250);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (29, 2,  750000,  true, 10000000, 1950, 13000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (30, 2,  875000,  true, 11000000, 2225, 14750);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (31, 2, 1000000,  true, 12500000, 2500, 16500);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (32, 3,       0, false,        0,    0,     0);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (33, 3,      10, false,  1000000,  100,  1000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (34, 3,      20, false,  2000000,  200,  2000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (35, 3,       0,  true,        0,    0,     0);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (36, 3,   60000,  true,  1200000,  240,  1600);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (37, 3,  120000,  true,  1800000,  360,  2400);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (38, 3,  180000,  true,  2400000,  480,  3200);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (39, 3,  240000,  true,  3000000,  600,  4000);
		INSERT INTO `upgrade_info` (`id`, `type`, `mod`, `cargo`, `price`, `miningexplosive`, `ore`) VALUES (40, 3,  300000,  true,  3600000,  720,  4800);
		
		CREATE TABLE `upgrade_job` (
		  `id` int(11) NOT NULL auto_increment,
		  `baseid` int(11) NOT NULL default '0',
		  `userid` int(11) NOT NULL default '0',
		  `tiles` int(11) NOT NULL default '0',
		  `cargo` int(11) NOT NULL default '0',
		  `bar` bool NOT NULL default FALSE,
		  `payed` bool NOT NULL default FALSE,
		  `colonizerid` int(11) NOT NULL default '0',
		  `started` int(11) NOT NULL default '0',
		  PRIMARY KEY  (`id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		ALTER TABLE upgrade_job ADD CONSTRAINT upgrade_job_fk_base FOREIGN KEY (baseid) REFERENCES bases(id);
		ALTER TABLE upgrade_job ADD CONSTRAINT upgrade_job_fk_user FOREIGN KEY (userid) REFERENCES users(id);
		ALTER TABLE upgrade_job ADD CONSTRAINT upgrade_job_fk_ships FOREIGN KEY (colonizerid) REFERENCES ships(id);
		ALTER TABLE upgrade_job ADD CONSTRAINT upgrade_job_fk_mod_tiles FOREIGN KEY (tiles) REFERENCES upgrade_info(id);
		ALTER TABLE upgrade_job ADD CONSTRAINT upgrade_job_fk_mod_cargo FOREIGN KEY (cargo) REFERENCES upgrade_info(id);
	]]></update>
	<update type="structure" datum="2008-09-07"><![CDATA[
		update upgrade_info set type=4 where type=3;
		update upgrade_info set type=3 where type=2;
		update upgrade_info set type=3 where id=15;
		
		CREATE TABLE `upgrade_maxvalues` (
		  `type` int(11) NOT NULL,
		  `maxtiles` int(11) NOT NULL default '1',
		  `maxcargo` int(11) NOT NULL default '1',
		  PRIMARY KEY  (`type`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
		INSERT INTO `upgrade_maxvalues` (`type`, `maxcargo`, `maxtiles`) VALUES ( 1, 750000,  80);
		INSERT INTO `upgrade_maxvalues` (`type`, `maxcargo`, `maxtiles`) VALUES ( 3, 1120000,  120);
		INSERT INTO `upgrade_maxvalues` (`type`, `maxcargo`, `maxtiles`) VALUES ( 4, 360000,  40);
		
		ALTER TABLE upgrade_job ADD `end` int(11) NOT NULL default '0';
		ALTER TABLE upgrade_job DROP `started`;
		ALTER TABLE upgrade_job MODIFY `colonizerid` int(11);
	]]></update>
	
	<update type="structure" datum="2008-10-04"><![CDATA[
		RENAME TABLE config TO config_old;
		
		CREATE TABLE config (
			`name` VARCHAR( 25 ) NOT NULL ,
			`value` TEXT NOT NULL ,
			`description` TEXT NOT NULL ,
			`version` INT NOT NULL DEFAULT 0,
			PRIMARY KEY (`name`)
		) ENGINE = InnoDB DEFAULT CHARSET = utf8;
				
		INSERT INTO config (
			`name` ,
			`value` ,
			`description` ,
			`version` 
			)
			VALUES (
			'ticks', '2774', 'Der aktuelle Tick', '0'
			), (
			'disablelogin', '', 'Begruendung, weshalb der Login abgeschalten ist (Leeres Feld == Login moeglich)', '0'
			), (
			'disableregister', '', 'Begruendung, weshalb man sich nicht registrieren kann (Leeres Feld == registrieren moeglich)', '0'
			), (
			'keys', '*', 'Schluessel mit denen man sich registrieren kann, wenn der Wert * ist braucht man keinen Schluessel zum registrieren', '0'
		);
			
		UPDATE config SET value=(SELECT ticks FROM config_old) WHERE name='ticks';
		UPDATE config SET value=(SELECT disablelogin FROM config_old) WHERE name='disablelogin';
		UPDATE config SET value=(SELECT disableregister FROM config_old) WHERE name='disableregister';
		UPDATE config SET value=(SELECT `keys` FROM config_old) WHERE name='keys';
		
		DROP TABLE config_old;
	]]></update>
	<update type="data" datum="2008-10-04"><![CDATA[	
		INSERT INTO `config` (`name`,`value`,`description`,`version`)
		VALUES ('foodpooldegeneration', '0', 'Prozent des Pools, die pro Tick verfaulen.', '0');
	]]></update>
	<update type="structure" datum="2008-10-04"><![CDATA[
		ALTER TABLE `users` ADD `foodpooldegeneration` DOUBLE NOT NULL DEFAULT '0';
	]]></update>
	<update type="data" datum="2008-12-14"><![CDATA[
		INSERT INTO config (
			`name` ,
			`value` ,
			`description` ,
			`version` 
		)
		VALUES (
			'bvsizemodifier', 1, 'Faktor fuer die Groesse bei der Battle Value Formel', '0'
		), (
			'bvdockmodifier', 1, 'Faktor fuer die Dockanzahl bei der Battle Value Formel', '0'
		), (
			'endtiemodifier', 5, 'Faktor fuer die Anzahl der Schiffe, die man mehr haben muss, um einen Kampf unentschieden zu beenden', '0'
		);
	]]></update>
	<update type="structure" datum="2008-12-21"><![CDATA[
		ALTER TABLE users ADD `vacpoints` int NOT NULL DEFAULT '0';
		INSERT INTO config (`name` , `value` , `description` , `version`) VALUES
			('vacpointspervactick', 7, 'Vacationpunkte, die ein Tick im Vac kostet', '0'), 
			('vacpointsperplayedtick', 1, 'Vacationpunkte, die ein gespielter Tick bringt', '0');
	]]></update>
	<update type="structure" datum="2009-01-03"><![CDATA[
		INSERT INTO config (`name` , `value` , `description` , `version`) VALUES
			('truemmer_maxitems', 4, 'Die maximale Anzahl an Gegenstaenden (Items/Waren) pro Schiffs-Truemmerteil', '0');
	]]></update>
	<update type="structure" datum="2009-03-21"><![CDATA[
		ALTER TABLE `ship_types` ADD `minCrew` INT NOT NULL;
		ALTER TABLE `ships_modules` ADD `minCrew` INT NOT NULL;
	]]></update>
	<update type="data" datum="2009-03-21"><![CDATA[
		UPDATE ship_types SET minCrew = crew;
		UPDATE ship_modules SET minCrew = crew;
	]]></update>
	<update type="data" datum="2009-03-21"><![CDATA[
		INSERT INTO `config` (`name`,`value`,`description`,`version`)
		VALUES ('nocrewhulldamagescale', '2', 'Skalierungsfaktor fuer den Huellenschaden durch zu wenig Crew', '0');
	]]></update>
	<update type="data" datum="2009-03-22"><![CDATA[
		INSERT INTO `ds2`.`config` (
			`name` ,
			`value` ,
			`description` ,
			`version` 
			)
			VALUES (
			'tax', '2', 'Steuern (RE), die ein Arbeiter produziert', '0'
			), (
			'socialsecuritybenefit', '1', 'Sozialhilfe (RE), die ein Arbeitsloser kostet', '0'
			);
	]]></update>
	<update type="data" datum="2009-03-22"><![CDATA[
		INSERT INTO `ds2`.`config` (
			`name` ,
			`value` ,
			`description` ,
			`version` 
			)
			VALUES (
			'desertedmeetingpoint', '1:15/15', 'Treffpunkt, bei dem alle desertierten Schiffe landen.', '0'
			);
	]]></update>
	<update type="data" datum="2009-03-22"><![CDATA[
		ALTER TABLE `ship_types` CHANGE `minCrew` `minCrew` INT( 11 ) NOT NULL DEFAULT '0';
	]]></update>
</updates>